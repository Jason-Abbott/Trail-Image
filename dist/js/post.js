"use strict";$(function(){function t(t,i){return'<i class="material-icons '+t+'">'+t+"</i><p>"+i+"</p>"}function i(t){var i=$(this),n=a.find("img"),e=i.data("big-loaded"),h=new s(i.data("big-width"),i.data("big-height")),d={top:0,left:0},r=function(t){var i="zoom-out";h.update(),h.needsToPan?(i="move",a.on("mousemove",u),a.on("touchstart",c),a.on("touchmove",f)):(a.off("mousemove",u),a.off("touchstart",c),a.off("touchmove",f)),u(t),n.css("cursor",i)},u=function(t){n.css({top:h.height.CSS(t.clientY),left:h.width.CSS(t.clientX)})},c=function(t){var i=t.targetTouches[0],o=n.position();d.left=o.left-i.clientX,d.top=o.top-i.clientY},f=function(t){var i=t.targetTouches[0];n.css({top:d.top+i.clientY,left:d.left+i.clientX})};void 0===e&&(e=!1),e?n.attr("src",i.data("big")):(n.attr("src",i.data("original")),$("<img />").bind("load",function(){n.attr("src",this.src),i.data("big-loaded",!0)}).attr("src",i.data("big"))),n.height(h.height.image).width(h.width.image),r(t),a.show(0,o),$(window).resize(r)}function o(){$("html").css("overflow","hidden"),document.ontouchmove=function(t){t.preventDefault()}}function n(){$("html").css("overflow","auto"),$(window).off("resize"),document.ontouchmove=null}var e=$("figure"),a=$("#light-box");a.on("click",function(){a.off("mousemove").hide(0,n)}),e.find("img").on("click",i).lazyload(),e.find(".mobile-button").on("touchstart",function(){var i=$(this),o=i.parent(),n=i.html();i.addClass("loading").html(t("hourglass","…")),$("<div/>").addClass("mobile-info").load(o.data("exif"),function(){var t=$(this);i.hide().removeClass("loading").html(n),t.appendTo(o).one("touchstart",function(o){o.stopPropagation(),o.preventDefault(),t.hide(),i.show()})})}),e.find(".info-button").one("mouseover",function(){var i=$(this);i.addClass("loading").html(t("cloud_download","Loading …")).load(i.parent().data("exif"),function(){i.removeClass("loading").addClass("loaded")})});var h=function(){function t(t){this.image=parseInt(t),this.window=0,this.extra=0,this.panRatio=0}return t.prototype.update=function(t){this.window=t,this.extra=(this.window-this.image)/2},t.prototype.ratio=function(){return(this.window-this.image)/this.window*2},t.prototype.CSS=function(t){var i=this.extra>0?0:(this.window/2-t)*this.panRatio;return(this.extra-i).toFixed(0)+"px"},t}(),s=function(){function t(t,i){this.width=new h(t),this.height=new h(i)}return t.prototype.update=function(){this.height.update(window.innerHeight),this.width.update(window.innerWidth),this.needsToPan=this.width.extra<0||this.height.extra<0,this.needsToPan&&(this.height.panRatio=this.width.panRatio=this.width.extra<this.height.extra&&this.width.extra<0?this.width.ratio():this.height.ratio())},t}()});
//# sourceMappingURL=/js/maps/post.js.map
