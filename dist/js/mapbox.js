"use strict";$(function(){function e(){s.addSource("photos",{type:"geojson",data:l,cluster:!0,clusterMaxZoom:15,clusterRadius:20}),s.addLayer({id:"clusters",type:"circle",source:"photos",filter:["has","point_count"],paint:{"circle-color":"#524948","circle-radius":{property:"point_count",type:"interval",stops:[[0,13],[50,17],[100,20]]},"circle-opacity":.6,"circle-stroke-width":3,"circle-stroke-color":"#ccc"}}),s.addLayer({id:"cluster-count",type:"symbol",source:"photos",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff"}}),s.addLayer({id:"unclustered-point",type:"circle",source:"photos",filter:["!has","point_count"],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),s.addSource("cluster-hover",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),s.addLayer({id:"cluster-hover",source:"cluster-hover",type:"circle",paint:{"circle-color":"#F86767","circle-stroke-width":4,"circle-stroke-color":"#fff","circle-radius":20}}),s.on("mousemove",function(e){var t=s.queryRenderedFeatures(e.point,{layers:["clusters"]});s.getCanvas().style.cursor=t.length?"pointer":"";var o={type:"FeatureCollection",features:[]};if(!t.length)return void s.getSource("cluster-hover").setData(o);o.features.push(t[0]),s.getSource("cluster-hover").setData(o)})}var t=!1,o={street:"streets-v9",satellite:"satellite-streets-v9"},r=$("#toggle-satellite"),c=new mapboxgl.NavigationControl,s=new mapboxgl.Map({container:"map-canvas",style:"mapbox://styles/mapbox/streets-v9",center:[-116.0987,44.7],zoom:6.5}),l=null;s.addControl(c,"top-right"),s.on("load",function(){r.click(function(){t=!t,s.once("data",function(t){"style"==t.dataType&&e()}),s.setStyle("mapbox://styles/mapbox/"+(t?o.satellite:o.street)),e()}),$.getJSON("/geo.json",function(t){l=t,e()})})});
//# sourceMappingURL=/js/maps/mapbox.js.map
