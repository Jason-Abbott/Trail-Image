"use strict";$(function(){function t(){s.addSource("photos",{type:"geojson",data:a,cluster:!0,clusterMaxZoom:15,clusterRadius:20}),s.addLayer({id:"clusters",type:"circle",source:"photos",filter:["has","point_count"],paint:{"circle-color":"#524948","circle-radius":{property:"point_count",type:"interval",stops:[[0,13],[50,17],[100,20]]},"circle-opacity":l,"circle-stroke-width":3,"circle-stroke-color":"#ccc"}}),s.addLayer({id:"cluster-count",type:"symbol",source:"photos",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff"}}),s.addLayer({id:"photo",type:"circle",source:"photos",filter:["!has","point_count"],paint:{"circle-color":"#11b4da","circle-radius":10,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),s.on("mouseenter","photo",function(){i.style.cursor="pointer"}),s.on("mouseleave","photo",function(){i.style.cursor=""}),s.on("mousedown","photo",function(t){console.log("click",t);var o=t.features[0].properties;c.empty().append($("<img>").attr("src",o.preview)).append($("<div>").html(t.lngLat.lat+", "+t.lngLat.lng)).css({top:t.point.y,left:t.point.x}).show()})}var o=!1,e={street:"streets-v9",satellite:"satellite-streets-v9"},c=$("#photo-preview"),r=$("#toggle-satellite"),n=new mapboxgl.NavigationControl,s=new mapboxgl.Map({container:"map-canvas",style:"mapbox://styles/mapbox/streets-v9",center:[-116.0987,44.7],zoom:6.5}),i=s.getCanvasContainer(),l=.6,a=null;s.addControl(n,"top-right"),s.on("load",function(){r.click(function(){o=!o,s.once("data",function(o){"style"==o.dataType&&t()}),s.setStyle("mapbox://styles/mapbox/"+(o?e.satellite:e.street)),t()}),$.getJSON("/geo.json",function(o){a=o,t()})})});
//# sourceMappingURL=/js/maps/mapbox.js.map
