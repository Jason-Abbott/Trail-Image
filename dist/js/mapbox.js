"use strict";$(function(){function t(){i.addSource("photos",{type:"geojson",data:l,cluster:!0,clusterMaxZoom:15,clusterRadius:20}),i.addLayer({id:"clusters",type:"circle",source:"photos",filter:["has","point_count"],paint:{"circle-color":"#524948","circle-radius":{property:"point_count",type:"interval",stops:[[0,13],[50,17],[100,20]]},"circle-opacity":.6,"circle-stroke-width":3,"circle-stroke-color":"#ccc"}}),i.addLayer({id:"cluster-count",type:"symbol",source:"photos",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff"}}),i.addLayer({id:"unclustered-point",type:"circle",source:"photos",filter:["!has","point_count"],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}})}var e=!1,o={street:"streets-v9",satellite:"satellite-streets-v9"},c=$("#toggle-satellite"),r=new mapboxgl.NavigationControl,i=new mapboxgl.Map({container:"map-canvas",style:"mapbox://styles/mapbox/streets-v9",center:[-116.0987,44.7],zoom:6.5}),l=null;i.addControl(r,"top-right"),i.on("load",function(){c.click(function(){e=!e,i.once("data",function(e){"style"==e.dataType&&t()}),i.setStyle("mapbox://styles/mapbox/"+(e?o.satellite:o.street)),t()}),$.getJSON("/geo.json",function(e){l=e,t()})})});