"use strict";$(function(){function t(t,n){var o=p.find(".material-icons.expand_less"),e=p.find(".material-icons.expand_more");t&&t.stopPropagation(),void 0===n&&(n=p.hasClass(l)),n?function(){p.removeClass(l),c.hide(),o.hide(),e.show()}():function(){p.addClass(l),c.show(),o.show(),e.hide()}()}function n(){var n=$(this).data("slug");"undefined"!=typeof loadPostTrack?loadPostTrack(n):window.location.href="/"+n,t(),ga("send","event",i,"Click Post")}function o(t,n,o,e){t.find("li").removeClass(l),o(e),n.addClass(l),s(e)}function e(t){var n=postMenuData.category[t[0]];u.empty(),null==t[1]&&(t[1]=n[0].title);for(var o=0;o<n.length;o++){var e=$("<li>").text(n[o].title);u.append(e),n[o].title==t[1]&&(e.addClass(l),a(t))}}function a(t){var n=postMenuData.category[t[0]];d.empty();for(var o=0;o<n.length;o++)if(n[o].title==t[1])for(var e=n[o].posts,a=0;a<e.length;a++){var s=postMenuData.post[e[a]],i=s.title;if(s.part&&a<e.length-1&&i==postMenuData.post[e[a+1]].title){for(var l=$("<ol>");a<e.length&&postMenuData.post[e[a]].title==i;)s=postMenuData.post[e[a]],l.prepend($("<li>").addClass("post").attr("value",s.part).html(s.subTitle).data("description",s.description).data("slug",s.slug)),a++;a--,s=postMenuData.post[e[a]],d.append($("<li>").addClass("series").html('<span class="mode-icon '+s.icon+'"></span>'+s.title).append(l))}else s.part&&(i+=": "+s.subTitle),d.append($("<li>").addClass("post").html('<span class="mode-icon '+s.icon+'"></span>'+i).data("description",s.description).data("slug",s.slug))}}function s(t){"string"==typeof t&&(t=[t,null]),document.cookie="menu="+t.join()}var i="Post Menu",l="selected",p=$("#post-menu-button"),c=$("#post-menu"),r=$("#menu-roots"),u=$("#menu-categories"),d=$("#menu-posts"),f=$("#post-description"),m=function(t){var n=new RegExp("\\bmenu=([^;\\b]+)","gi"),o=n.exec(document.cookie);return null===o?t:o[1].split(",")}(["When",null]);p.one("click",function(){for(var t in postMenuData.category){var n=$("<li>").text(t);r.append(n),t==m[0]&&(n.addClass(l),e(m))}ga("send","event",i,"Open")}).click(t),r.on("click","li",function(t){t.stopPropagation();var n=$(this);m=[n.text(),null],o(r,n,e,m)}),u.on("click","li",function(t){t.stopPropagation();var n=$(this);m[1]=n.text(),o(u,n,a,m)}),d.on("click","li.post",n).on("mouseover","li.post",function(){f.html($(this).data("description"))}).on("mouseout",function(){f.empty()}),$("html").click(function(n){t(n,!0)})});
//# sourceMappingURL=/js/maps/post-menu.js.map
