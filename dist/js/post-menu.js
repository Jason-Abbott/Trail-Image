"use strict";$(function(){function t(t,n){var i=l.find(".material-icons.expand_less"),a=l.find(".material-icons.expand_more");t&&t.stopPropagation(),void 0===n&&(n=l.hasClass(s)),n?function(){l.removeClass(s),r.hide(),i.hide(),a.show()}():function(){l.addClass(s),r.show(),i.show(),a.hide()}()}function n(){var n=$(this).data("slug");"undefined"!=typeof loadPostTrack?loadPostTrack(n):window.location.href="/"+n,t()}function i(t,n,i,a){t.find("li").removeClass(s),i(a),n.addClass(s),o(a)}function a(t){var n=TrailImage.menu[t[0]];c.empty(),null==t[1]&&(t[1]=n[0].title);for(var i=0;i<n.length;i++){var a=$("<li>").text(n[i].title);c.append(a),n[i].title==t[1]&&(a.addClass(s),e(t))}}function e(t){var n=TrailImage.menu[t[0]];d.empty();for(var i=0;i<n.length;i++)if(n[i].title==t[1])for(var a=n[i].posts,e=0;e<a.length;e++){var o=TrailImage.post[a[e]],s=o.title;if(o.part&&e<a.length-1&&s==TrailImage.post[a[e+1]].title){for(var l=$("<ol>");e<a.length&&TrailImage.post[a[e]].title==s;)o=TrailImage.post[a[e]],l.prepend($("<li>").addClass("post").attr("value",o.part).html(o.subTitle).data("description",o.description).data("slug",o.slug)),e++;e--,o=TrailImage.post[a[e]],d.append($("<li>").addClass("series").html('<span class="mode-icon '+o.icon+'"></span>'+o.title).append(l))}else o.part&&(s+=": "+o.subTitle),d.append($("<li>").addClass("post").html('<span class="mode-icon '+o.icon+'"></span>'+s).data("description",o.description).data("slug",o.slug))}}function o(t){"string"==typeof t&&(t=[t,null]),document.cookie="menu="+t.join()}var s="selected",l=$("#post-menu-button"),r=$("#post-menu"),p=$("#menu-roots"),c=$("#menu-tags"),d=$("#menu-posts"),u=$("#post-description"),m=function(t){var n=new RegExp("\\bmenu=([^;\\b]+)","gi"),i=n.exec(document.cookie);return null===i?t:i[1].split(",")}(["When",null]);l.one("click",function(){for(var t in TrailImage.menu){var n=$("<li>").text(t);p.append(n),t==m[0]&&(n.addClass(s),a(m))}}).click(t),p.on("click","li",function(t){t.stopPropagation();var n=$(this);m=[n.text(),null],i(p,n,a,m)}),c.on("click","li",function(t){t.stopPropagation();var n=$(this);m[1]=n.text(),i(c,n,e,m)}),d.on("click","li.post",n).on("mouseover","li.post",function(){u.html($(this).data("description"))}).on("mouseout",function(){u.empty()}),$("html").click(function(n){t(n,!0)})});
//# sourceMappingURL=/js/maps/post-menu.js.map
