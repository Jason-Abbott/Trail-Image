"use strict";$(function(){function t(t,o){var a=i.find(".material-icons.expand_less"),e=i.find(".material-icons.expand_more");t&&t.stopPropagation(),void 0===o&&(o=i.hasClass(s)),o?(i.removeClass(s),l.hide(),a.hide(),e.show()):(i.addClass(s),l.show(),a.show(),e.hide())}function o(t,o,a,e){t.find("li").removeClass(s),a(e),o.addClass(s),util.setting.menuCategory=e}function a(t){var o=postMenuData.category[t[0]];r.empty(),null==t[1]&&(t[1]=o[0].title);for(var a=0;a<o.length;a++){var n=$("<li>").text(o[a].title);r.append(n),o[a].title==t[1]&&(n.addClass(s),e(t))}}function e(t){var o=postMenuData.category[t[0]];u.empty();for(var a=0;a<o.length;a++)if(o[a].title==t[1])for(var e=o[a].posts,n=0;n<e.length;n++){var s=postMenuData.post[e[n]],i=s.title;if(s.part&&n<e.length-1&&i==postMenuData.post[e[n+1]].title){for(var l=$("<ol>");n<e.length&&postMenuData.post[e[n]].title==i;)s=postMenuData.post[e[n]],l.prepend($("<li>").addClass("post").attr("value",s.part).html(s.subTitle).data("description",s.description).data("slug",s.slug)),n++;n--,s=postMenuData.post[e[n]],u.append($("<li>").addClass("series").html('<span class="mode-icon '+s.icon+'"></span>'+s.title).append(l))}else s.part&&(i+=": "+s.subTitle),u.append($("<li>").addClass("post").html('<span class="mode-icon '+s.icon+'"></span>'+i).data("description",s.description).data("slug",s.slug))}}var n="Post Menu",s="selected",i=$("#post-menu-button"),l=$("#post-menu"),p=$("#menu-roots"),r=$("#menu-categories"),u=$("#menu-posts"),c=$("#post-description"),d=util.setting.menuCategory;null==d&&(d=["When",null]),i.one("click",function(){for(var t in postMenuData.category){var o=$("<li>").text(t);p.append(o),t==d[0]&&(o.addClass(s),a(d))}util.log.event(n,"Open")}).click(t),p.on("click","li",function(t){t.stopPropagation();var e=$(this);d=[e.text(),null],o(p,e,a,d)}),r.on("click","li",function(t){t.stopPropagation();var a=$(this);d[1]=a.text(),o(r,a,e,d)}),u.on("click","li.post",function(){window.location.href="/"+$(this).data("slug"),t(),util.log.event(n,"Click Post")}).on("mouseover","li.post",function(){c.html($(this).data("description"))}).on("mouseout",function(){c.empty()}),$("html").click(function(o){t(o,!0)})});
//# sourceMappingURL=/js/maps/post-menu.js.map
