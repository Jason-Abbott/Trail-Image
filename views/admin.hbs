<html>
<head>
	<title>Administration</title>
	<!--suppress ALL -->
	<meta name="robots" content="noindex">
	<link href='/css/admin.css' rel='stylesheet' type='text/css'/>
	<link href='/img/favicon.ico' rel='shortcut icon'/>
	<link href='/img/favicon.ico' rel='icon' type='image/vnd.microsoft.icon'/>
	<script src='//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js' type='text/javascript'></script>
	<script src='/js/admin.js' type='text/javascript'></script>
</head>
<body>
	<div class="column" id="reference">
		<h2>APIs and Statistics</h2>
		<fieldset id="statistics">
			<legend>Statistics</legend>
			<ul>
				<li><a href='https://www.google.com/analytics/web/#report/visitors-overview/a{{config.google.analyticsID}}w43724061p43759940/'>Google Analytics</a></li>
				<li><a href='https://www.google.com/webmasters/tools/dashboard?hl=en&siteUrl=http://www.{{config.domain}}/&authuser=0'>Google Webmaster</a></li>
				<li><a href='https://www.bing.com/webmaster/home/dashboard?url=http%3A%2F%2Fwww.{{config.domain}}%2F'>Bing Webmaster</a></li>
				<li><a href='/wwwhisper/admin/'>WWWHisper</a></li>
				<li><a href='https://www.facebook.com/insights/?sk=wo_{{config.facebook.siteID}}'>Facebook Insights</a></li>
				<li><a href='https://www.flickr.com/photos/trailimage/stats/'>Flickr Statistics</a></li>
				<li><a href='http://www.panoramio.com/user/5644534/stats'>Panoramio Statistics</a></li>
			</ul>
			<div class="message"></div>
		</fieldset>

		<fieldset id="api-keys">
			<legend>API Keys</legend>
			<ul>
				<li><a href='https://cloud.google.com/console#/project/{{config.google.projectID}}'>Map API</a></li>
				<li><a href='https://www.flickr.com/services/apps/{{config.flickr.appID}}/key'>Flickr API</a></li>
			</ul>
		</fieldset>
	</div>

	<div id="caching" class="column">
		<h2>Cache Contents</h2>

      <form id="library" action="/admin/library/reload">
         <fieldset id="library">
            <legend>Library</legend>
            <button type="submit">Reload</button>
            <input type="hidden" name="remove-matches" value="true"/>
            <div class="message"></div>
         </fieldset>
      </form>

		<form id="json" action="/admin/json/delete">
			<fieldset id="json">
				<legend>JSON</legend>
			{{#if json}}
				<button type="submit">Delete</button>
            <select name="json" size="4" multiple>
				{{#json}}
					<option value="{{this}}">{{this}}</option>
				{{/json}}
				</select>
				<input type="hidden" name="remove-matches" value="true"/>
			{{/if}}
				<div class="message"></div>
			</fieldset>
		</form>

		<form id="views" action="/admin/view/delete">
			<fieldset>
				<legend>Views</legend>
			{{#if views}}
				<button type="submit">Delete</button>
				<select name="views" size="12" multiple>
				{{#views}}
					<option value="{{this}}">{{this}}</option>
				{{/views}}
				</select>
				<input type="hidden" name="remove-matches" value="true"/>
            <label><input type="checkbox" name="include-related"/>Also Delete Related Views</label>
			{{else}}
				No views are cached
			{{/if}}
				<div class="message"></div>
			</fieldset>
		</form>

		<form id="maps" action="/admin/map/delete">
			<fieldset>
				<legend>Maps</legend>
			{{#if maps}}
				<button type="submit">Delete</button>
				<select name="maps" size="12" multiple>
				{{#maps}}
					<option value="{{this}}">{{this}}</option>
				{{/maps}}
				</select>
				<input type="hidden" name="remove-matches" value="true"/>
			{{else}}
				No maps are cached
			{{/if}}
				<div class="message"></div>
			</fieldset>
		</form>
	</div>

{{#if logs}}
	<div class="column" id="logs">
		<h2>Logs</h2>
		<table>
			<tbody>
		{{#each logs}}
				<tr class='head'><td colspan='3'>{{@key}}</td></tr>
			{{#this}}
				<tr class='{{level}}'>
               <td class='icon'>{{#if iconName}}{{{icon iconName}}}{{/if}}</td>
					<td>{{{message}}}</td><td class='timestamp'>{{timestamp}}</td>
				</tr>
			{{/this}}
		{{/each}}
			</tbody>
		</table>
	</div>
{{/if}}
</body>
</html>