"use strict";$(function(){var n="Post Menu",s="selected",e=$("#post-menu-button"),i=$("#post-menu"),o=$("#menu-roots"),l=$("#menu-categories"),d=$("#menu-posts"),t=$("#post-description"),p=util.setting.menuCategory;function a(t,a){var n=e.find(".material-icons.expand_less"),o=e.find(".material-icons.expand_more");t&&t.stopPropagation(),void 0===a&&(a=e.hasClass(s)),a?(e.removeClass(s),i.hide(),n.hide(),o.show()):(e.addClass(s),i.show(),n.show(),o.hide())}function u(t,a,n,o){t.find("li").removeClass(s),n(o),a.addClass(s),util.setting.menuCategory=o}function r(t){var a=t[0];if(null!==a){var n=postMenuData.category[a];l.empty(),null==t[1]&&(t[1]=n[0].title);for(var o=0;o<n.length;o++){var e=$("<li>").text(n[o].title);l.append(e),n[o].title==t[1]&&(e.addClass(s),c(t))}}}function c(t){var a=t[0];if(null!==a){var n=postMenuData.category[a];d.empty();for(var o=0;o<n.length;o++)if(n[o].title==t[1])for(var e=n[o].posts,s=0;s<e.length;s++){var i=postMenuData.post[e[s]],l=i.title;if(i.part&&s<e.length-1&&l==postMenuData.post[e[s+1]].title){for(var p=$("<ol>");s<e.length&&postMenuData.post[e[s]].title==l;){var u=void 0===(i=postMenuData.post[e[s]]).part?"":i.part,r=void 0===i.subTitle?"":i.subTitle;p.prepend($("<li>").addClass("post").attr("value",u).html(r).data("description",i.description).data("slug",i.slug)),s++}s--,i=postMenuData.post[e[s]],d.append($("<li>").addClass("series").html('<span class="mode-icon '+i.icon+'"></span>'+i.title).append(p))}else i.part&&(l+=": "+i.subTitle),d.append($("<li>").addClass("post").html('<span class="mode-icon '+i.icon+'"></span>'+l).data("description",i.description).data("slug",i.slug))}}}null==p&&(p=["When",null]),e.one("click",function(){if(null!==p){for(var t in postMenuData.category){var a=$("<li>").text(t);o.append(a),t==p[0]&&(a.addClass(s),r(p))}util.log.event(n,"Open")}}).click(a),o.on("click","li",function(t){t.stopPropagation();var a=$(this);p=[a.text(),null],u(o,a,r,p)}),l.on("click","li",function(t){if(t.stopPropagation(),null!==p){var a=$(this);p[1]=a.text(),u(l,a,c,p)}}),d.on("click","li.post",function(){window.location.href="/"+$(this).data("slug"),a(),util.log.event(n,"Click Post")}).on("mouseover","li.post",function(){t.html($(this).data("description"))}).on("mouseout",function(){t.empty()}),$("html").click(function(t){a(t,!0)})});
//# sourceMappingURL=/js/maps/post-menu.js.map
